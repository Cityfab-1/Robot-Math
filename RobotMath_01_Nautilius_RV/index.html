<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/style.css">
  <title>Robot Math - speech to numbers - EN</title>
  <!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> -->
  <!-- <script src="js/jquery-3.6.0.min.js"></script> -->

  <!-- // NUMBER TO SPEECH RESPONSIVE VOICE JAVASCRIPT -->
  <script src="https://code.responsivevoice.org/responsivevoice.js?key=pqQI3QTE"></script>
  <!-- NUMBER TO SPEECH RESPONSIVE VOICE JAVASCRIPT // -->

  <script>
  //// RESPONSIVE VOICE
  // 1. initialize new SpeechSynthesisUtterance object
  let tts = new SpeechSynthesisUtterance();

  // 2. Setting the Speech Language
  tts.lang = "en";

  // 3. Populating the select dropdown with the list of available voices on Web Speech API
  // 3.1 global array of available voices
  let speechvoices = [];
  window.speechSynthesis.onvoiceschanged = () => {
  // 3.2 To get the list of voices using getVoices() function
  speechvoices = window.speechSynthesis.getVoices();
  // 3.3 We need to populate the section and set the first voice
  tts.voice = speechvoices[0];

  let select_voice = document.getElementById("RVoices-select");
  speechvoices.forEach((voice, i) => (select_voice.options[i] = new Option(voice.name, i)));
  // 3.4 This changes the voice of the speaker or utterance to the selected voice
  document.getDocumentById("RVoices-select").addEventListener("change", () => {
  tts.voice = voices[document.getDocumentById("RVoices-select").value];
  });
};

// 4. set Default Rate & Pitch example
responsiveVoice.setDefaultRate(0.8);
//// responsiveVoice.setDefaultPitch(1.0);


// 5. BEGIN TEST SENTENCE
if(responsiveVoice.voiceSupport()) {
  responsiveVoice.speak("Hello, i am Nautilius, the first iteration from Robot Math");
  responsiveVoice.clickEvent();
}

//SETTING THE CONTROLS - SPEAK, PLAY, PAUSE AND RESUME
//SPEAK
//first we get the value of the textarea or document
//// document.getElementById("ButtonSpeak").addEventListener("click", () => {
////   tts.text = document.getElementById("IDtextInput").value;
//then we implement the speechsynthesis instance
////   window.speechSynthesis.speak(tts);
//// });
//// document.getElementById("IDresultYrobotBig").addEventListener("change", () => {
////   tts.text = document.getElementById("IDresultYrobotBig").value;
//then we implement the speechsynthesis instance
////   window.speechSynthesis.speak(tts);
//// });
//// setTimeout(function(){
////  speak();
////  }, 4000); // Wait x seconds
document.getElementById("ButtonSpeak").onclick = function () {
  responsiveVoice.speak(document.getElementById("IDtextInput").textContent);
};
//PAUSE
//// document.getElementById("pause").addEventListener("click", () => {
// Pause the speechSynthesis instance
////   window.speechSynthesis.pause();
//// });

//RESUME
//// document.getElementById("resume").addEventListener("click", () => {
// Resume the paused speechSynthesis instance
////   window.speechSynthesis.resume();
//// });

//CANCEL
//// document.querySelector("ButtonStop").addEventListener("click", () => {
document.getElementById("ButtonStop").addEventListener("click", () => {
  // Cancel the speechSynthesis instance
  window.speechSynthesis.cancel();
});

//TO SET THE VOLUME, PITCH, AND RATE
//Volume
//We get the volume value from the input
document.getDocumentById("volume").addEventListener("input", () => {
  const vol = document.getDocumentById("volume").value;
  // Set volume property of the SpeechSynthesisUtterance instance
  tts.volume = vol;
  // Updating the volume label
  document.querySelector("#vol-label").innerHTML = vol;
});

//RATE
// We get the rate Value from the input
document.getDocumentById("rate").addEventListener("input", () => {
  const rate = document.getDocumentById("rate").value;
  // Set rate property of the SpeechSynthesisUtterance instance
  tts.rate = rate;
  // Updating the rate label
  document.getDocumentById("rate-lab").innerHTML = rate;
});

//PITCH
// We get the pitch Value from the input
document.getElementById("pitch").addEventListener("input", () => {
  const pitch = document.getElementById("pitch").value;
  // Setting thepitch property of the SpeechSynthesisUtterance instance
  tts.pitch = pitch;
  // Updating the pitch label
  document.getDocumentById("pitch-lab").innerHTML = pitch;
});

//// RESPONSIVE VOICE
</script>

</head>
<body>
  <!-- SPEECH TO NUMBER HTML -->
  <div id="speech2number">
    <h1>Robot Math <span class="h1_small">Speech to Number</span></h1>
    <!--<h2></h2>-->
    <p class="hints">hints</p>
    <table id="ID_table" border="1">
      <tr>
        <th colspan="4">X <small>(student)</small></th>
      </tr>
      <tr>
        <td colspan="4" id="IDvalueXstudentBig">
          <span class="output"><em>X</em></span>
        </td>
      </tr>
      <tr>
        <th>Operator 1 <small>(teacher)</small></th>
        <th>Number 1 <small>(teacher)</small></th>
        <th>Operator 2 <small>(teacher)</small></th>
        <th>Number 2 <small>(teacher)</small></th>
      </tr>
      <tr>
        <td>
          <select id="IDoperatorZteacher1">
            <option value="choose1">choose 1st operator</option>
            <option value="addition1">+</option>
            <option value="subtraction1">-</option>
            <option value="multiplication1">*</option>
            <option value="division1">/</option>
          </select>
        </td>
        <td>
          <input type="text" id="IDvalueZteacher1" name="valueZteacher1" value="0" />
        </td>
        <td>
          <select id="IDoperatorZteacher2">
            <option value="choose2">choose 2th operator</option>
            <option value="addition2">+</option>
            <option value="subtraction2">-</option>
          </select>
        </td>
        <td>
          <input type="text" id="IDvalueZteacher2" name="valueZteacher2" value="0" />
        </td>
      </tr>
      <tr>
        <td colspan="4">
          <!-- <img src="img/C-3PO.jpg" onclick="recognitionStart()"> -->
        </td>
      </tr>
      <tr>
        <th colspan="4">Y <small>(robot)</small></th>
      </tr>
      <tr>
        <td colspan="4" id="IDresultYrobotBig">
          Y
        </td>
      </tr>
    </table>
    <input type="button" id="ButtonListen" name="buttonSubmit" value="Listen" onclick="setTimeout(recognitionStart(), 1000);" />
    <input type="button" id="ButtonReset" name="buttonReset" value="Reset" onClick="window.location.reload();" />
    <textarea name="description" id="IDtextInput" class="form-control form-control-lg"
    placeholder="Hi, i am Nautilius, the first iteration from Robot Math."></textarea>
    <select id="RVoices-select">
      <option> option 1 </option>
    </select>
    <!-- <button onclick="responsiveVoice.speak('The Internet is a series of tubes!');"
    type="button" value="Play">Play</button>
    <input type="button" id="ButtonSpeak" name="buttonSubmit" value="Speak!" onclick="setTimeout(responsiveVoiceSpeak(), 1000);" /> -->
    <!-- <input type="button" id="ButtonSpeak" name="buttonSubmit" value="Speak!" onclick="setTimeout(responsiveVoiceSpeak(), 1000);" /> -->

  </div>
  <!-- SPEECH TO NUMBER JAVASCRIPT -->
  <script src="js/speech_to_number.js"></script>

  <!-- // ResponsiveVoice-NonCommercial label -->
  <div>
    <a href="https://responsivevoice.org">ResponsiveVoice-NonCommercial</a> licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/"><img title="ResponsiveVoice Text To Speech" src="https://responsivevoice.org/wp-content/uploads/2014/08/95x15.png" alt="95x15" width="95" height="15" /></a>
    <br><br>
  </div>
  <!-- ResponsiveVoice-NonCommercial label // -->
</body>

</html>
